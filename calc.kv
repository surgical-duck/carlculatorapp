

<DisplayLabel>:
    id: display
    size_hint_y: 0.3
    canvas.before:
        Color:
            rgba: root.background_color
        Rectangle:
            size: display.size
            pos: display.pos
    text:""
    color: root.font_color
    font_size: dp(45)
    halign: 'right'
    valign: 'middle'
    text_size: self.width*0.9, self.height


<SmallRoundedButton@Button>:
    font_size:dp(30)
    background_normal: ''
    background_color: 0, 0, 0, 0


<LargeRoundedButton@Button>:
    font_size:dp(30)
    background_normal: ''
    background_color: 0, 0, 0, 0


<ACRoundedButton@Button>:
    font_size:dp(30)
    background_normal: ''
    background_color: 0, 0, 0, 0


<EqualRoundedButton@Button>:
    font_size:dp(30)
    background_normal: ''
    background_color: 0, 0, 0, 0


<Simple>:
    name: 'simple'
    display: display

    GridLayout:
        rows: 2
        cols: 1
        size: root.width, root.height
        padding: dp(0)
        spacing: dp(10)
        background_color: (0, 0, 0, 0)
        background_normal: ''
        canvas.before:
            Color:
                rgba: root.calculator_background
            Rectangle:
                size: self.size
                pos: self.pos

        DisplayLabel:
            id: display            

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.7
            padding: (dp(15), dp(5), dp(15), dp(15))

            BoxLayout: 
                padding: dp(0)
                spacing: dp(10)
                size_hint_y: 0.16
                LargeRoundedButton:
                    text: 'ร'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    font_size:dp(35)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: 'รท'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    font_size:dp(35)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '+'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    font_size:dp(35)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '-'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    font_size:dp(35)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

            BoxLayout:
                size_hint_y: 0.84
                orientation: 'vertical'
                padding: dp(0)
                spacing: dp(0)

                BoxLayout:
                    padding: (0, dp(10), 0, dp(10))
                    spacing: dp(10)

                    BoxLayout:
                        orientation: 'vertical'
                        spacing: dp(10)

                        LargeRoundedButton:
                            text: '7'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]
                        LargeRoundedButton:
                            text: '4'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]
                    
                    BoxLayout:
                        orientation: 'vertical'
                        spacing: dp(10)

                        LargeRoundedButton:
                            text: '8'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]

                        LargeRoundedButton:
                            text: '5'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]
                    
                    BoxLayout:
                        orientation: 'vertical'
                        spacing: dp(10)

                        LargeRoundedButton:
                            text: '9'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]

                        LargeRoundedButton:
                            text: '6'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]

                    LargeRoundedButton:
                        canvas.before:
                            Color:
                                rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(30)]
                        on_press: display.text = root.backspace(display.text)
                        Image:
                            source: root.settings.backspace_icon
                            center: self.parent.center
                            size: (dp(75), dp(50))
                        

                BoxLayout:
                    padding: dp(0)
                    spacing: dp(10)

                    BoxLayout:
                        orientation: 'vertical'
                        spacing: dp(10)

                        LargeRoundedButton:
                            text: '1'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]
                        ACRoundedButton:
                            text: 'AC'
                            color: root.settings.larger_button_font
                            on_press: display.text = ''
                            canvas.before:
                                Color:
                                    rgba: root.settings.ac_button if self.state == 'normal' else root.settings.ac_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]

                    BoxLayout:
                        orientation: 'vertical'
                        spacing: dp(10)

                        LargeRoundedButton:
                            text: '2'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]
                        LargeRoundedButton:
                            text: '0'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]

                    BoxLayout:
                        orientation: 'vertical'
                        spacing: dp(10)

                        LargeRoundedButton:
                            text: '3'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]
                        LargeRoundedButton:
                            text: '.'
                            color: root.settings.larger_button_font
                            on_press: display.text += self.text
                            canvas.before:
                                Color:
                                    rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                                RoundedRectangle:
                                    pos: self.pos
                                    size: self.size
                                    radius: [dp(30)]

                    EqualRoundedButton:
                        text: '='
                        color: root.settings.larger_button_font
                        on_press: display.text = root.evaluate_expression(display.text, None)
                        font_size:dp(35)
                        canvas.before:
                            Color:
                                rgba: root.settings.equal_button if self.state == 'normal' else root.settings.equal_button_on_press
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(30)]

    FloatLayout:
        Button:
            on_release: 
                app.root.current = 'menu'
                root.manager.transition.direction = 'down'
            size_hint_x: None
            size_hint_y: None
            size: (dp(50), dp(50))
            pos: (0, root.height-self.height)
            background_color: (0, 0, 0, 0)
            background_normal: ''
            canvas.before:
                Color:
                    rgba: root.settings.display_background if self.state == 'normal' else root.settings.display_button_on_press
                Rectangle:
                    size: self.size
                    pos: self.pos
            Image:
                source: root.settings.menu_icon
                center: self.parent.center
                size: (self.parent.size[0]*0.7, self.parent.size[1]*0.7)
        
        Button:
            on_release: 
                app.root.current = 'advanced'
                root.manager.transition.direction = 'left'
            size_hint_x: None
            size_hint_y: None
            size: (dp(50), dp(50))
            pos: (root.width-self.width, root.height-self.height)
            background_color: (0, 0, 0, 0)
            background_normal: ''
            canvas.before:
                Color:
                    rgba: root.settings.display_background if self.state == 'normal' else root.settings.display_button_on_press
                Rectangle:
                    size: self.size
                    pos: self.pos
            Image:
                source: root.settings.swap_icon
                center: self.parent.center
                size: (self.parent.size[0]*0.7, self.parent.size[1]*0.7)


<Advanced>:
    name: 'advanced'
    display: display

    GridLayout:
        rows: 2
        cols: 1
        size: root.width, root.height
        padding: dp(0)
        spacing: dp(10)
        background_color: (0, 0, 0, 0)
        background_normal: ''
        canvas.before:
            Color:
                rgba: root.settings.calculator_background
            Rectangle:
                size: self.size
                pos: self.pos

        DisplayLabel:
            id: display
                
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.7

            GridLayout:
                cols: 4
                size_hint_y: 0.22
                padding: (dp(15), dp(5), dp(15), dp(15))
                spacing: dp(10)

                SmallRoundedButton:
                    text: 'ฯ'
                    color: root.settings.smaller_button_font
                    on_press: display.text += self.text
                    font_size: dp(27)
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                SmallRoundedButton:
                    text: 'e'
                    color: root.settings.smaller_button_font
                    on_press: display.text += self.text 
                    font_size: dp(27)    
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                SmallRoundedButton:
                    text: '('
                    color: root.settings.smaller_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                SmallRoundedButton:
                    text: ')'
                    color: root.settings.smaller_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                
                SmallRoundedButton:
                    text: 'DEG\nRAD'
                    color: root.settings.smaller_button_font
                    on_press: rad_deg_label.text = root.rad_deg_swap(rad_deg_label.text)
                    font_size: dp(16)
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                SmallRoundedButton:
                    text: 'sin'
                    color: root.settings.smaller_button_font
                    font_size: dp(25)
                    on_press: display.text += self.text + '('
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                SmallRoundedButton:
                    text: 'cos'
                    color: root.settings.smaller_button_font
                    font_size: dp(25)
                    on_press: display.text += self.text + '('
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                SmallRoundedButton:
                    text: 'tan'
                    color: root.settings.smaller_button_font
                    font_size: dp(25)
                    on_press: display.text += self.text + '('  
                    canvas.before:
                        Color:
                            rgba: root.settings.smaller_button if self.state == 'normal' else root.settings.smaller_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

            GridLayout:
                cols: 4
                size_hint_y: 0.78
                padding: (dp(15), dp(5), dp(15), dp(15))
                spacing: dp(10)

                LargeRoundedButton:
                    text: '^'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                    on_press: display.text += 'sqrt('
                    Image:
                        source: root.settings.sqrt_icon
                        center: self.parent.center
                        size: (dp(40), dp(40))
                    
                LargeRoundedButton:
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                    on_press: display.text = root.backspace(display.text)
                    Image:
                        source: root.settings.backspace_icon
                        center: self.parent.center
                        size: (dp(75), dp(50))
                LargeRoundedButton:
                    text: 'ร'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                LargeRoundedButton:
                    text: '7'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '8'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '9'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: 'รท'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                LargeRoundedButton:
                    text: '4'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '5'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '6'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '+'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                LargeRoundedButton:
                    text: '1'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '2'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '3'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '-'
                    color: root.settings.larger_button_font
                    on_press: display.text = root.handle_operators(self.text)
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]

                ACRoundedButton:
                    text: 'AC'
                    color: root.settings.ac_button_font
                    on_press: display.text = ''
                    canvas.before:
                        Color:
                            rgba: root.settings.ac_button if self.state == 'normal' else root.settings.ac_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '0'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                LargeRoundedButton:
                    text: '.'
                    color: root.settings.larger_button_font
                    on_press: display.text += self.text
                    canvas.before:
                        Color:
                            rgba: root.settings.larger_button if self.state == 'normal' else root.settings.larger_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
                EqualRoundedButton:
                    text: '='
                    color: root.settings.equal_button_font
                    on_press: display.text = root.evaluate_expression(display.text, rad_deg_label.text)
                    canvas.before:
                        Color:
                            rgba: root.settings.equal_button if self.state == 'normal' else root.settings.equal_button_on_press
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(30)]
    FloatLayout:
        Button:
            on_release: 
                app.root.current = 'menu'
                root.manager.transition.direction = 'down'
            size_hint_x: None
            size_hint_y: None
            size: (dp(50), dp(50))
            pos: (0, root.height-self.height)
            background_color: (0, 0, 0, 0)
            background_normal: ''
            canvas.before:
                Color:
                    rgba: root.settings.display_background if self.state == 'normal' else root.settings.display_button_on_press
                Rectangle:
                    size: self.size
                    pos: self.pos
            Image:
                source: root.settings.menu_icon
                center: self.parent.center
                size: (self.parent.size[0]*0.7, self.parent.size[1]*0.7)
        
        Button:
            on_release: 
                app.root.current = 'simple'
                root.manager.transition.direction = 'right'
            size_hint_x: None
            size_hint_y: None
            size: (dp(50), dp(50))
            pos: (root.width-self.width, root.height-self.height)
            background_color: (0, 0, 0, 0)
            background_normal: ''
            canvas.before:
                Color:
                    rgba: root.settings.display_background if self.state == 'normal' else root.settings.display_button_on_press
                Rectangle:
                    size: self.size
                    pos: self.pos
            Image:
                source: root.settings.swap_icon
                center: self.parent.center
                size: (self.parent.size[0]*0.7, self.parent.size[1]*0.7)

        Button:
            text: root.rad_deg_default 
            color: root.settings.display_font
            id: rad_deg_label
            font_size: dp(15)
            size_hint_x: None
            size_hint_y: None
            size: (dp(50), dp(50))
            pos: display.pos
            background_color: (0, 0, 0, 0)
            background_normal: ''
            canvas.before:
                Color:
                    rgba: root.settings.display_background if self.state == 'normal' else root.settings.display_button_on_press
                Rectangle:
                    size: self.size
                    pos: self.pos


<MenuButton@Button>:
    size_hint_y: None
    height: dp(80)
    font_size: dp(20)
    color: 1, 1, 1, 1
    background_normal: ''
    background_color: 0, 0, 0, 0
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1) if self.state == 'normal' else (0.8, 0.8, 0.8, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<Menu>:
    name: 'menu'

    ScrollView:
        do_scroll_x: False

        BoxLayout:
            padding: dp(5)
            spacing: dp(5)
            background_color: (0, 0, 0, 0)
            background_normal: ''
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 1) 
                Rectangle:
                    size: self.size
                    pos: self.pos
            orientation: 'vertical'
            
            BoxLayout:
                size_hint_y: 0.08

                MenuButton:
                    text: '<'
                    color: (0, 0, 0, 1)
                    font_size: dp(20)
                    size_hint_x: 0.2
                    size_hint_y: 1
                    text_size: (self.width, self.height)
                    halign: 'center'
                    valign: 'center'
                    on_release: 
                        app.root.current = root.default_calculator
                        root.manager.transition.direction = 'up'
                Label:
                    text: 'Settings'
                    font_size: dp(25)
                    color: (0, 0, 0, 1)
                    size_hint_x: 0.8
                    text_size: (self.width*0.6, self.height)
                    halign: 'left'
                    valign: 'center'

            BoxLayout:
                size_hint_y: 0.24

                BoxLayout:
                    orientation: 'vertical'

                    Label:
                        text: 'Default calculator:'
                        color: (0, 0, 0, 1)
                        font_size: dp(20)
                        pos: self.parent.pos
                        halign: 'left'
                        valign: 'center'
                        text_size: (self.size[0]*0.9, self.size[1])
                        canvas.before:
                            Color:
                                rgba: (0.5, 0.5, 0.5, 1)
                            Line:
                                points: (7, self.y+self.height, self.width, self.y+self.height)
                    BoxLayout:
                        Label:
                            text: 'Simple'
                            color: (0, 0, 0, 1)
                            font_size: dp(16)
                            text_size: (self.size[0]*0.9, self.size[1])
                            halign: 'right'
                            valign: 'center'
                        CheckBox:
                            group: 'default_calc'
                            active: root.default_calculator == 'simple'
                            on_active: root.set_default_calc('simple')
                            allow_no_selection: False
                    BoxLayout:
                        Label:
                            text: 'Advanced'
                            color: (0, 0, 0, 1)
                            font_size: dp(16)
                            text_size: (self.size[0]*0.9, self.size[1])
                            halign: 'right'
                            valign: 'center'
                        CheckBox:
                            group: 'default_calc'
                            active: root.default_calculator == 'advanced'
                            on_active: root.set_default_calc('advanced')
                            allow_no_selection: False

            BoxLayout:
                size_hint_y: 0.28

                BoxLayout:
                    orientation: 'vertical'

                    Label:
                        text: 'Default color theme:'
                        pos: self.parent.pos
                        color: (0, 0, 0, 1)
                        font_size: dp(20)
                        halign: 'left'
                        valign: 'center'
                        text_size: (self.size[0]*0.9, self.size[1])
                        canvas.before:
                            Color:
                                rgba: (0.5, 0.5, 0.5, 1)
                            Line:
                                points: (7, self.y+self.height, self.width, self.y+self.height)

                    BoxLayout:
                        Label:
                            text: 'Dark'
                            color: (0, 0, 0, 1)
                            font_size: dp(16)
                            halign: 'right'
                            valign: 'center'
                            text_size: (self.size[0]*0.9, self.size[1])
                        CheckBox:
                            size_hint_x: 1
                            group: 'color_theme_group'
                            active: root.color_theme == 'dark'
                            on_active: root.set_color_theme('dark')
                            on_release: root.popup_color_theme()
                            allow_no_selection: False
                    BoxLayout:
                        Label:
                            text: 'Light'
                            color: (0, 0, 0, 1)
                            font_size: dp(16)
                            halign: 'right'
                            valign: 'center'
                            text_size: (self.size[0]*0.9, self.size[1])
                        CheckBox:
                            group: 'color_theme_group'
                            active: root.color_theme == 'light'
                            on_active: root.set_color_theme('light')
                            on_release: root.popup_color_theme()
                            allow_no_selection: False

                    BoxLayout:
                        Label:
                            text: 'Maida'
                            color: (0, 0, 0, 1)
                            font_size: dp(16)
                            halign: 'right'
                            valign: 'center'
                            text_size: (self.size[0]*0.9, self.size[1])
                        CheckBox:
                            group: 'color_theme_group'
                            active: root.color_theme == 'pink' 
                            on_active: root.set_color_theme('pink')
                            on_release: root.popup_color_theme()
                            allow_no_selection: False

            BoxLayout:
                size_hint_y: 0.24

                BoxLayout:
                    orientation: 'vertical'

                    Label:
                        text: 'Default angle unit:'
                        text_size: (self.size[0]*0.9, self.size[1])
                        color: (0, 0, 0, 1)
                        font_size: dp(20)
                        halign: 'left'
                        valign: 'center'
                        canvas.before:
                            Color:
                                rgba: (0.5, 0.5, 0.5, 1)
                            Line:
                                points: (7, self.y+self.height, self.width, self.y+self.height)
                    BoxLayout:
                        Label:
                            text: 'Radians'
                            color: (0, 0, 0, 1)
                            font_size: dp(16)
                            halign: 'right'
                            valign: 'center'
                            text_size: (self.size[0]*0.9, self.size[1])
                        CheckBox:
                            size_hint_x: 1
                            group: 'default_rad_deg'
                            active: root.default_angle_unit == 'RAD'
                            on_active: root.set_default_angle_unit('RAD')
                            allow_no_selection: False

                    BoxLayout:
                        Label:
                            text: 'Degrees'
                            color: (0, 0, 0, 1)
                            font_size: dp(16)
                            halign: 'right'
                            valign: 'center'
                            text_size: (self.size[0]*0.9, self.size[1])
                        CheckBox:
                            group: 'default_rad_deg'
                            active: root.default_angle_unit == 'DEG'
                            on_active: root.set_default_angle_unit('DEG')
                            allow_no_selection: False

            MenuButton:
                text: 'Easter eggs'
                color: (0, 0, 0, 1)
                font_size: dp(20)
                size_hint_y: 0.08
                on_release:
                    root.popup_easter()
                canvas.before:
                    Color:
                        rgba: (0.5, 0.5, 0.5, 1)
                    Line:
                        points: (7, self.y+self.height, self.width, self.y+self.height)
            MenuButton:
                text: 'About'
                color: (0, 0, 0, 1)
                font_size: dp(20)
                size_hint_y: 0.08
                on_release:
                    root.popup_about()
                canvas.before:
                    Color:
                        rgba: (0.5, 0.5, 0.5, 1)
                    Line:
                        points: (7, self.y+self.height, self.width, self.y+self.height)
